webpackJsonp([10],{178:598,302:function(t,e){t.exports={container:"Program__container___13ig6","court-container":"Program__court-container___3zlJU",match:"Program__match___3mJvB",court:"Program__court___2Pyoq","court-name":"Program__court-name___3j_CN"}},628:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(259),n=r(u),c=a(13),d=r(c),o=a(11),l=r(o),f=a(12),s=r(f),i=a(15),m=r(i),_=a(14),p=r(_),h=a(1),P=r(h),M=a(302),v=r(M),R=function(t){function e(){return(0,l.default)(this,e),(0,m.default)(this,(e.__proto__||(0,d.default)(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,s.default)(e,[{key:"render",value:function(){var t=this.props,e=t.match,a=e.players,r=void 0===a?[]:a,u=e.name,c=t.players,d=t.courtId,o=t.matchId,l=t.index,f=(0,n.default)(r,2),s=f[0],i=f[1],m=i&&c[s].name,_=i&&c[i].name;return P.default.createElement("div",{className:v.default.match,"data-court-id":d,"data-match-id":o},l>=0?"第"+(l+1)+"场":"",P.default.createElement("p",null,u),P.default.createElement("p",null,m," VS ",_))}}]),e}(h.Component);e.default=R,t.exports=e.default},629:function(t,e,a){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.getUnScheduledMatchIds=void 0;var u=a(20),n=a(630),c=r(n);e.default=(0,u.combineReducers)({program:c.default});e.getUnScheduledMatchIds=function(t){return c.getUnScheduledMatchIds(t.program)}},630:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getUnScheduledMatchIds=e.adjustMatch=e.updateProgram=e.fetchProgram=e.ADJUST_MATCH=e.UPDATE_PROGRAM_FAILTURE=e.UPDATE_PROGRAM_SUCCESS=e.UPDATE_PROGRAM=e.FETCH_PROGRAM_FAILTURE=e.FETCH_PROGRAM_SUCCESS=e.FETCH_PROGRAM=void 0;var u,n=a(35),c=r(n),d=a(260),o=r(d),l=a(178),f=r(l),s=a(19),i=r(s),m=a(49),_=a(41),p=r(_),h=a(38),P=r(h),M=e.FETCH_PROGRAM="FETCH_PROGRAM",v=e.FETCH_PROGRAM_SUCCESS="FETCH_PROGRAM_SUCCESS",R=e.FETCH_PROGRAM_FAILTURE="FETCH_PROGRAM_FAILTURE",g=e.UPDATE_PROGRAM="UPDATE_PROGRAM",E=e.UPDATE_PROGRAM_SUCCESS="UPDATE_PROGRAM_SUCCESS",A=e.UPDATE_PROGRAM_FAILTURE="FETCH_PROGRAM_FAILTURE",y=e.ADJUST_MATCH="ADJUST_MATCH",C=(e.fetchProgram=function(t){return{types:[M,v,R],promise:function(){return p.default.post(P.default.fetchProgram,(0,i.default)({},t))}}},e.updateProgram=function(t){var e=t.courts,a=void 0===e?{}:e;return{types:[g,E,A],promise:function(){return p.default.post(P.default.updateProgram,(0,i.default)({},t,{courts:(0,f.default)(a).map(function(t){return(0,i.default)({},a[t],{id:t})})}))}}},e.adjustMatch=function(t){return{type:y,payload:t}},function(t,e){return(0,i.default)({},t,{matches:t.matches.filter(function(t){return t!==e})})}),I=function(t,e,a){var r=t.matches,u=a?r.indexOf(a):r.length-1;return(0,i.default)({},t,{matches:[].concat((0,o.default)(r.slice(0,u)),[e],(0,o.default)(r.slice(u)))})};e.default=(0,m.handleActions)((u={},(0,c.default)(u,v,function(t,e){return(0,i.default)({},t,e.payload)}),(0,c.default)(u,y,function(t,e){var a=t.courts,r=(t.matches,e.payload),u=r.el,n=r.targetCourtId,c=r.sibling.matchId,d=r.isFromTemporary,o=r.isReorder;return(0,i.default)({},t,{courts:(0,f.default)(a).reduce(function(t,e){var r=(a[e].matches,a[e]);return u.courtId!==e||d||o?n&&n===e&&(r=I(a[n],u.matchId,c)):r=C(a[u.courtId],u.matchId),t[e]=r,t},{})})}),u),{courts:{},matches:{},players:{}});e.getUnScheduledMatchIds=function(t){var e=t.courts,a=t.matches,r=(t.players,(0,f.default)(e).reduce(function(t,a){return[].concat((0,o.default)(t),(0,o.default)(e[a].matches))},[]));return(0,f.default)(a).filter(function(t){return r.indexOf(t)===-1})}},1508:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(19),n=r(u),c=a(13),d=r(c),o=a(11),l=r(o),f=a(12),s=r(f),i=a(15),m=r(i),_=a(14),p=r(_),h=a(1),P=r(h),M=a(222),v=(r(M),a(628)),R=r(v),g=a(302),E=r(g),A=function(t){function e(){return(0,l.default)(this,e),(0,m.default)(this,(e.__proto__||(0,d.default)(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,s.default)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,a=e.court,r=e.matches,u=e.courtId;return P.default.createElement("div",{className:E.default.court},P.default.createElement("div",{className:E.default["court-name"]},a.name,"(共",a.matches.length,"场比赛)"),P.default.createElement("div",{className:"dragula-container","data-court-id":u},a.matches.map(function(e,a){return P.default.createElement(R.default,(0,n.default)({key:e,match:r[e],index:a,courtId:u,matchId:e},t.props))})))}}]),e}(h.Component);e.default=A,t.exports=e.default},1509:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(178),n=r(u),c=a(260),d=r(c),o=a(19),l=r(o),f=a(13),s=r(f),i=a(11),m=r(i),_=a(12),p=r(_),h=a(15),P=r(h),M=a(14),v=r(M),R=a(1),g=r(R),E=a(222),A=r(E),y=a(1508),C=r(y),I=a(628),T=r(I),S=a(302),U=r(S),O=function(t){function e(){var t,a,r,u;(0,m.default)(this,e);for(var n=arguments.length,c=Array(n),d=0;d<n;d++)c[d]=arguments[d];return a=r=(0,P.default)(this,(t=e.__proto__||(0,s.default)(e)).call.apply(t,[this].concat(c))),r.handleClick=function(){var t=r.props,e=t.updateProgram,a=t.program,u=t.params;e((0,l.default)({},u,{courts:a.courts}))},u=a,(0,P.default)(r,u)}return(0,v.default)(e,t),(0,p.default)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.fetchProgram,a=t.adjustMatch,r=t.params;e(r),(0,A.default)([].concat((0,d.default)(document.querySelectorAll(".dragula-container"))),{copy:!0,isContainer:function(t){return t.classList.contains("dragula-container")}}).on("drop",function(t,e,r,u){var n=e?e.dataset.courtId:r.dataset.courtId,c=r.classList.contains("temporary"),d=!e;d||(a({el:(0,l.default)({},t.dataset),sibling:{matchId:u&&u.dataset.matchId},targetCourtId:n,isFromTemporary:c,isReorder:d}),t.parentNode&&t.parentNode.removeChild(t))})}},{key:"render",value:function(){var t=this.props,e=t.unScheduledMatchIds,a=t.program,r=(a.players,a.matches),u=a.courts;return g.default.createElement("div",{className:U.default.container+" container"},g.default.createElement("p",null,g.default.createElement("button",{onClick:this.handleClick},"Update Program")),g.default.createElement("div",{className:"dragula-container temporary"},e.map(function(t){return g.default.createElement(T.default,(0,l.default)({key:t,match:r[t],matchId:t},a))})),g.default.createElement("div",{className:U.default["court-container"]},(0,n.default)(u).map(function(t){return g.default.createElement(C.default,(0,l.default)({key:t,court:u[t],courtId:t},a))})))}}]),e}(R.Component);e.default=O,t.exports=e.default},1510:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=a(18),n=a(1509),c=r(n),d=a(630),o=a(629),l=function(t){return{unScheduledMatchIds:(0,o.getUnScheduledMatchIds)(t.program),program:t.program.program}};e.default=(0,u.connect)(l,{fetchProgram:d.fetchProgram,updateProgram:d.updateProgram,adjustMatch:d.adjustMatch})(c.default),t.exports=e.default}});